<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å­¦ç”Ÿç®¡ç†ç³»ç»Ÿåå°</title>
  <link rel="stylesheet" href="/static/css/layui.css">
  
  <style>
    /* é¡µé¢æ•´ä½“æ ·å¼ */
    body {
      background-color: #f2f2f2;
      font-family: 'Arial', sans-serif;
    }

    #dashboard {
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      border-radius: 15px;
      background-color: white;
    }

    /* ç¾åŒ–å¡ç‰‡ç»„ä»¶ */
    .layui-card {
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      margin-bottom: 20px; /* å¢åŠ å¡ç‰‡ä¹‹é—´çš„é—´è· */
    }

    .layui-card:hover {
      transform: scale(1.02);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    }

    /* å¡ç‰‡æ ‡é¢˜æ ·å¼ */
    .layui-card-header {
      font-size: 18px;
      font-weight: bold;
      background-color: #2C3E50; /* æ·±è‰²èƒŒæ™¯ */
      color: white;
      border-radius: 10px 10px 0 0;
      padding: 15px;
    }

    /* æ¬¢è¿å—å¢¨ç»¿è‰²æ¸å˜æ ·å¼ */
    blockquote {
      background: linear-gradient(to right, #1B3A3D, #4B8B8C); /* å¢¨ç»¿è‰²æ¸å˜ */
      color: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px; /* å¢åŠ ä¸ä¸‹æ–¹å†…å®¹çš„é—´è· */
    }

    /* é€šçŸ¥åˆ—è¡¨æ ·å¼ */
    #notice-list li {
      margin-top: 5px;
      margin-bottom: 8px;
      font-size: 15px;
    }

    /* ç³»ç»Ÿç®€ä»‹æ®µè½æ ·å¼ */
    .layui-card-body p {
      line-height: 1.6;
      color: #333; /* æ·±è‰²å­—ä½“ */
    }

    /* å“åº”å¼æ”¯æŒ */
    @media (max-width: 768px) {
      .layui-card-header {
        text-align: center;
      }
    }
  </style>
</head>

<body>

<div id="dashboard">
  <div class="layui-row layui-col-space15">
    
    <!-- æ¬¢è¿ä¿¡æ¯ -->
    <div class="layui-col-md12">
      <blockquote class="layui-elem-quote layui-text" style="text-align: center;">
        <h1 style="margin-bottom: 10px;">æ¬¢è¿ä½¿ç”¨å­¦ç”Ÿç®¡ç†ç³»ç»Ÿåå°</h1>
        <p>é«˜æ•ˆç®¡ç†å­¦ç”Ÿä¿¡æ¯ä¸è€ƒè¯•æˆç»©ï¼ŒåŠ©åŠ›æ•™è‚²ç®¡ç†æ›´æ™ºèƒ½ã€‚</p>
      </blockquote>
    </div>

    <!-- æ•°æ®æ¦‚è§ˆ -->
    <div class="layui-col-md3">
      <div class="layui-card">
        <div class="layui-card-header">å­¦ç”Ÿæ€»æ•°</div>
        <div class="layui-card-body" style="text-align: center;">
          <h2 style="color: #4CAF50;" class="student-count"></h2>
          <p>å®æ—¶ç»Ÿè®¡å½“å‰ç³»ç»Ÿä¸­çš„å­¦ç”Ÿæ•°é‡</p>
        </div>
      </div>
    </div>

    <div class="layui-col-md3">
        <div class="layui-card">
          <div class="layui-card-header">æ•™å¸ˆæ€»æ•°</div>
          <div class="layui-card-body" style="text-align: center;">
            <h2 style="color: #1433bd;" class="teacher-count"></h2>
            <p>å®æ—¶ç»Ÿè®¡å½“å‰ç³»ç»Ÿä¸­çš„æ•™å¸ˆæ•°é‡</p>
          </div>
        </div>
      </div>

    <div class="layui-col-md3">
      <div class="layui-card">
        <div class="layui-card-header">è¯¾ç¨‹æ€»æ•°</div>
        <div class="layui-card-body" style="text-align: center;">
          <h2 style="color: #FFB800;" class="subject-count"></h2>
          <p>ç³»ç»Ÿä¸­ç®¡ç†çš„è¯¾ç¨‹æ•°é‡</p>
        </div>
      </div>
    </div>

    <div class="layui-col-md3">
      <div class="layui-card">
        <div class="layui-card-header">è€ƒè¯•åœºæ¬¡</div>
        <div class="layui-card-body" style="text-align: center;">
          <h2 style="color: #FF5722;" class="exam-count"></h2>
          <p>ç³»ç»Ÿä¸­å®‰æ’çš„è€ƒè¯•æ€»æ•°</p>
        </div>
      </div>
    </div>

    <!-- ç³»ç»Ÿé€šçŸ¥ -->
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-header">ç³»ç»Ÿé€šçŸ¥</div>
        <div class="layui-card-body">
          <ul id="notice-list" style="list-style-type: none; padding: 0;">
            <!--æ’å…¥é€šçŸ¥å¤„-->
          </ul>
        </div>
      </div>
    </div>

    <!-- ç³»ç»Ÿç®€ä»‹ -->
    <div class="layui-col-md12">
      <div class="layui-card">
        <div class="layui-card-header">ç³»ç»Ÿç®€ä»‹</div>
        <div class="layui-card-body">
          <p>å­¦ç”Ÿç®¡ç†ç³»ç»Ÿæ˜¯ä¸“ä¸ºæ•™è‚²æœºæ„è®¾è®¡çš„ç»¼åˆç®¡ç†å¹³å°ã€‚ç³»ç»ŸåŠŸèƒ½æ¶µç›–å­¦ç”Ÿä¿¡æ¯ç®¡ç†ã€æˆç»©ç®¡ç†åŠè€ƒè¯•å®‰æ’ç­‰æ¨¡å—ï¼Œå¸®åŠ©å­¦æ ¡ä¸æ•™è‚²æœºæ„å®ç°æ•°å­—åŒ–ç®¡ç†ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
          <p>ç®¡ç†å‘˜å¯ä»¥é«˜æ•ˆå¤„ç†å­¦ç”Ÿæ•°æ®ï¼Œæ•™å¸ˆä¾¿æ·åœ°æŸ¥è¯¢è€ƒå‹¤ä¸è€ƒè¯•ä¿¡æ¯ï¼Œå­¦ç”Ÿå¿«é€ŸæŸ¥çœ‹è‡ªå·±çš„æˆç»©å’Œå‡ºå‹¤æƒ…å†µã€‚</p>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
    layui.use(['layer', 'jquery', 'form'], function(){
        var layer = layui.layer;
        var $ = layui.jquery;
        var form = layui.form;
        
        $.ajax({
            url: '/get_count',
            method: 'GET',
            success: function(data) {
                $('.student-count').text(data.student_count + ' äºº');
                $('.teacher-count').text(data.teacher_count + ' äºº');
                $('.subject-count').text(data.subject_count + ' é—¨');
                $('.exam-count').text(data.exam_count + ' åœº');
            },
            error: function(xhr, status, error) {
                layer.msg('åŠ è½½å¤±è´¥ï¼')
            }
        })

        $.ajax({
            url: '/notices',
            method:'GET',
            success: function(data) {
                var tbody = $('#notice-list');
                tbody.empty();  // æ¸…ç©ºè¡¨æ ¼å†…å®¹

                // æ’å…¥é€šçŸ¥æ•°æ®
                data.forEach(function(notice) {
                    var row = `
                        <li>ğŸ“¢ <strong>${notice.created_time}ï¼š</strong> ${notice.content}</li>
                    `;
                    tbody.append(row);
                });

                form.render(); // é‡æ–°æ¸²æŸ“è¡¨å•
            },
            error: function(xhr, status, error) {
                console.error('åŠ è½½é€šçŸ¥æ•°æ®å¤±è´¥:', error);
            }
        })
    })
</script>
</body>
</html>
